<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" style="height: 100%;">
	<head>
		<meta charset="ISO-8859-1">
		<title> Market Listing </title>
		<link th:href="@{/styles/button.css}" rel="stylesheet"/>
		<link th:href="@{/styles/landing.css}" rel="stylesheet"/>
		<link th:href="@{/styles/employee_page.css}" rel="stylesheet"/>
	  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
	  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
	  
	  <style>
	    #page {
	      display: flex;
	      height: 100vh;
	    }
	
	    #website-title {
	      margin-left: 8px;
	      margin-right: 8px;
	      font-size: 12px;
	    }
	    
	    .center{
	    margin-left: auto;
	    margin-right: auto;
	    object-fit: contain;
	    }
	    
	    .image-preview{
	    vertical-align: middle;
	    }
	
	  </style>
	</head>

	<body>
		
		<!-- HEADER BAR -->
		<div th:insert="header :: header"></div>
		<!-- END HEADER BAR -->
	
		<!-- SIDEBAR -->
	  <div th:insert="navBar :: navBar"></div>
	  <!-- END SIDEBAR -->
		
		<!-- Delete confirmation popup -->
		<div class="modal fade" id="deletePopup" tabindex="-1">
		  <div class="modal-dialog">
		    <div class="modal-content">
		      <div class="modal-header">
		        <h5 class="modal-title" id="deletePopup">Update Listing</h5>
		        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
		      </div>
		      <div class="modal-body">
		        <p>This will delete your listing - are you sure?
		      </div>
		      <div class="modal-footer">
		        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
		        <form method="post" action="#" th:action="@{/viewMarketListing/deleteListing/{listingId}(listingId=${currListing.id})}" th:object="${paymentDetails}">
		          <button type="submit" class="btn btn-danger" name="delete"> Delete </button>
		        </form>
		      </div>
		    </div>
		  </div>
		</div>
		
		<div id="page">
		  <div class="card mx-auto h-100 w-100">
		    <div class="card-header d-flex justify-content-center">
		      <h1 th:text="${widget.name}"></h1>
		    </div>
		    <div class="card-body">
		
		      <div class="row">
		      	<div class="col-sm-6 my-2">
		          <div class="card h-60" th:if="${currListing.coverImage != null && !currListing.coverImage.isEmpty()}">
		          	<button style="height:40px;" onclick="changeImageForward()"> Next Image </button>
		            <img class="card-img-bottom center col-sm-2" style=" height:50vh;" id="showWidget" th:src="@{/listingImages/{image}(image = ${currListing.coverImage})}" />
		            <button style="height:40px;" onclick="changeImageBackward()"> Previous Image </button>
		            <script th:inline="javascript">
							    /*<![CDATA[*/
							    var image = document.querySelector('#showWidget');
							    var len = /*[[${images.length}]]*/ '0';
							    const images = /*[[${images}]]*/ 'd';
							    var x = images.indexOf(/*[[${currListing.coverImage}]]*/);
							    
							    function changeImageForward()
							    {
							    	if(len==1)
							    	{
							    		window.alert("Only one image has been uploaded for this item")
							    	}
							    	
							    	x++;
							    	
							    	if(x >= len || x < 1)
							    	{
							    		x = 1;
							    	}
							    	
							    	console.log(x);
							    	
							    	image.src = '/listingImages/' + images[x];
							    }
							    
							    function changeImageBackward()
							    {
							    	if(len==1)
							    	{
							    		window.alert("Only one image has been uploaded for this item")
							    	}
							    	
							    	x--;
							    	
							    	if(x >= len || x < 1)
							    	{
							    		x = len-1;
							    	}
							    	
							    	console.log(x);
							    	
							    	image.src = '/listingImages/' + images[x];
							    }
							    /*]]>*/
						    </script>
		          </div>
		          <div class="card h-100" th:unless="${currListing.coverImage != null && !currListing.coverImage.isEmpty()}">
		            <div class="d-flex justify-content-center card-header">
		              <h2>No Image Provided</h2>
		            </div>
		          </div>
		        </div>
		        <div class="col-sm-6 my-2">
		          <div class="d-flex justify-content-center">
		            <h2>Seller Information</h2>
		          </div>
		          <ul class="list-group">
		            <li class="list-group-item">Seller Name:
		              <span th:if="${seller.displayName != null && !seller.displayName.isEmpty()}" th:text="${seller.displayName}"></span>
		              <span th:unless="${seller.displayName != null && !seller.displayName.isEmpty()}" th:text="${seller.username}"></span>
		            </li>
		            <li class="list-group-item">Seller Rating: <span th:text="${sellerRating.RatingName}"></span></li>
		          </ul>
		          <div class="d-flex justify-content-center">
		            <h2>Listing Details</h2>
		          </div>
		          <ul class="list-group">
		            <li class="list-group-item">Number Available: <span
		                th:text="${currListing.qtyAvailable}"></span></li>
		            <li class="list-group-item">Price: $<span th:text="${currListing.pricePerItem}"></span>
		            </li>
		          </ul>
			        <div th:if="${widget.category} == appliance">
			          <div class="d-flex justify-content-center">
			            <h2>Product Information</h2>
			          </div>
			          <ul class="list-group" th:if="${widget.subCategory} == 'washer'">
			            <li class="list-group-item">Description: <span th:text="${widget.description}"></span>
			            </li>
			            <li class="list-group-item">Length: <span th:text="${appliance.length}"></span> Inches
			            </li>
			            <li class="list-group-item">Width: <span th:text="${appliance.width}"></span> Inches
			            </li>
			            <li class="list-group-item">Height: <span th:text="${appliance.height}"></span> Inches
			            </li>
			            <li class="list-group-item">Color: <span th:text="${appliance.color}"></span></li>
			            <li class="list-group-item">Condition: <span
			                th:text="${appliance.itemCondition}"></span></li>
			            <li class="list-group-item">Model: <span th:text="${washer.model}"></span></li>
			            <li class="list-group-item">Brand: <span th:text="${washer.brand}"></span></li>
			            <li class="list-group-item">Material: <span th:text="${washer.material}"></span></li>
			          </ul>
			          <ul class="list-group" th:if="${widget.subCategory} == 'dryer'">
			            <li class="list-group-item">Description: <span th:text="${widget.description}"></span>
			            </li>
			            <li class="list-group-item">Length: <span th:text="${appliance.length}"></span> Inches
			            </li>
			            <li class="list-group-item">Width: <span th:text="${appliance.width}"></span> Inches
			            </li>
			            <li class="list-group-item">Height: <span th:text="${appliance.height}"></span> Inches
			            </li>
			            <li class="list-group-item">Color: <span th:text="${appliance.color}"></span></li>
			            <li class="list-group-item">Condition: <span
			                th:text="${appliance.itemCondition}"></span></li>
			            <li class="list-group-item">Model: <span th:text="${dryer.model}"></span></li>
			            <li class="list-group-item">Brand: <span th:text="${dryer.brand}"></span></li>
			            <li class="list-group-item">Material: <span th:text="${dryer.material}"></span></li>
			          </ul>
			          <ul class="list-group" th:if="${widget.subCategory} == 'blender'">
			            <li class="list-group-item">Description: <span th:text="${widget.description}"></span>
			            </li>
			            <li class="list-group-item">Length: <span th:text="${appliance.length}"></span> Inches
			            </li>
			            <li class="list-group-item">Width: <span th:text="${appliance.width}"></span> Inches
			            </li>
			            <li class="list-group-item">Height: <span th:text="${appliance.height}"></span> Inches
			            </li>
			            <li class="list-group-item">Color: <span th:text="${appliance.color}"></span></li>
			            <li class="list-group-item">Condition: <span
			                th:text="${appliance.itemCondition}"></span></li>
			            <li class="list-group-item">Model: <span th:text="${blender.model}"></span></li>
			            <li class="list-group-item">Brand: <span th:text="${blender.brand}"></span></li>
			            <li class="list-group-item">Material: <span th:text="${blender.material}"></span></li>
			          </ul>
			          <ul class="list-group" th:if="${widget.subCategory} == 'fridge'">
			            <li class="list-group-item">Description: <span th:text="${widget.description}"></span>
			            </li>
			            <li class="list-group-item">Length: <span th:text="${appliance.length}"></span> Inches
			            </li>
			            <li class="list-group-item">Width: <span th:text="${appliance.width}"></span> Inches
			            </li>
			            <li class="list-group-item">Height: <span th:text="${appliance.height}"></span> Inches
			            </li>
			            <li class="list-group-item">Color: <span th:text="${appliance.color}"></span></li>
			            <li class="list-group-item">Condition: <span
			                th:text="${appliance.itemCondition}"></span></li>
			            <li class="list-group-item">Model: <span th:text="${fridge.model}"></span></li>
			            <li class="list-group-item">Brand: <span th:text="${fridge.brand}"></span></li>
			            <li class="list-group-item">Material: <span th:text="${fridge.material}"></span></li>
			          </ul>
			          <ul class="list-group" th:if="${widget.subCategory} == 'microwave'">
			            <li class="list-group-item">Description: <span th:text="${widget.description}"></span>
			            </li>
			            <li class="list-group-item">Length: <span th:text="${appliance.length}"></span> Inches
			            </li>
			            <li class="list-group-item">Width: <span th:text="${appliance.width}"></span> Inches
			            </li>
			            <li class="list-group-item">Height: <span th:text="${appliance.height}"></span> Inches
			            </li>
			            <li class="list-group-item">Color: <span th:text="${appliance.color}"></span></li>
			            <li class="list-group-item">Condition: <span
			                th:text="${appliance.itemCondition}"></span></li>
			            <li class="list-group-item">Model: <span th:text="${microwave.model}"></span></li>
			            <li class="list-group-item">Brand: <span th:text="${microwave.brand}"></span></li>
			            <li class="list-group-item">Material: <span th:text="${microwave.material}"></span></li>
			          </ul>
			        </div>
		
			        <div th:if="${widget.category} == 'appliance_parts'">
			          <div class="d-flex justify-content-center">
			            <h2>Product Information</h2>
			          </div>
			          <ul class="list-group" th:if="${widget.subCategory} == 'blender_parts'">
			            <li class="list-group-item">Description: <span th:text="${widget.description}"></span>
			            </li>
			            <li class="list-group-item">Part Name: <span
			                th:text="${appliance_parts.partName}"></span></li>
			            <li class="list-group-item">Model: <span th:text="${appliance_parts.model}"></span></li>
			            <li class="list-group-item">Brand: <span th:text="${appliance_parts.brand}"></span></li>
			            <li class="list-group-item">Color: <span th:text="${appliance_parts.color}"></span></li>
			            <li class="list-group-item">Made In: <span th:text="${appliance_parts.madeIn}"></span>
			            </li>
			            <li class="list-group-item">Material: <span th:text="${blender_parts.material}"></span>
			            </li>
			            <li class="list-group-item">Warranty: <span th:text="${blender_parts.warranty}"></span>
			            </li>
			            <li class="list-group-item">Condition: <span
			                th:text="${blender_parts.condition}"></span></li>
			          </ul>
			          <ul class="list-group" th:if="${widget.subCategory} == 'dryer_parts'">
			            <li class="list-group-item">Description: <span th:text="${widget.description}"></span>
			            </li>
			            <li class="list-group-item">Part Name: <span
			                th:text="${appliance_parts.partName}"></span></li>
			            <li class="list-group-item">Model: <span th:text="${appliance_parts.model}"></span></li>
			            <li class="list-group-item">Brand: <span th:text="${appliance_parts.brand}"></span></li>
			            <li class="list-group-item">Color: <span th:text="${appliance_parts.color}"></span></li>
			            <li class="list-group-item">Made In: <span th:text="${appliance_parts.madeIn}"></span>
			            </li>
			            <li class="list-group-item">Material: <span th:text="${dryer_parts.material}"></span>
			            </li>
			            <li class="list-group-item">Warranty: <span th:text="${dryer_parts.warranty}"></span>
			            </li>
			            <li class="list-group-item">Condition: <span
			                th:text="${dryer_parts.condition}"></span></li>
			          </ul>
			          <ul class="list-group" th:if="${widget.subCategory} == 'microwave_parts'">
			            <li class="list-group-item">Description: <span th:text="${widget.description}"></span>
			            </li>
			            <li class="list-group-item">Part Name: <span
			                th:text="${appliance_parts.partName}"></span></li>
			            <li class="list-group-item">Model: <span th:text="${appliance_parts.model}"></span></li>
			            <li class="list-group-item">Brand: <span th:text="${appliance_parts.brand}"></span></li>
			            <li class="list-group-item">Color: <span th:text="${appliance_parts.color}"></span></li>
			            <li class="list-group-item">Made In: <span th:text="${appliance_parts.madeIn}"></span>
			            </li>
			            <li class="list-group-item">Material: <span th:text="${microwave_parts.material}"></span>
			            </li>
			            <li class="list-group-item">Warranty: <span th:text="${microwave_parts.warranty}"></span>
			            </li>
			            <li class="list-group-item">Condition: <span
			                th:text="${microwave_parts.condition}"></span></li>
			          </ul>
			          <ul class="list-group" th:if="${widget.subCategory} == 'refrigerator_parts'">
			            <li class="list-group-item">Description: <span th:text="${widget.description}"></span>
			            </li>
			            <li class="list-group-item">Part Name: <span
			                th:text="${appliance_parts.partName}"></span></li>
			            <li class="list-group-item">Model: <span th:text="${appliance_parts.model}"></span></li>
			            <li class="list-group-item">Brand: <span th:text="${appliance_parts.brand}"></span></li>
			            <li class="list-group-item">Color: <span th:text="${appliance_parts.color}"></span></li>
			            <li class="list-group-item">Made In: <span th:text="${appliance_parts.madeIn}"></span>
			            </li>
			            <li class="list-group-item">Material: <span th:text="${refrigerator_parts.material}"></span>
			            </li>
			            <li class="list-group-item">Warranty: <span th:text="${refrigerator_parts.warranty}"></span>
			            </li>
			            <li class="list-group-item">Condition: <span
			                th:text="${refrigerator_parts.condition}"></span></li>
			          </ul>
			          <ul class="list-group" th:if="${widget.subCategory} == 'washer_parts'">
			            <li class="list-group-item">Description: <span th:text="${widget.description}"></span>
			            </li>
			            <li class="list-group-item">Part Name: <span
			                th:text="${appliance_parts.partName}"></span></li>
			            <li class="list-group-item">Model: <span th:text="${appliance_parts.model}"></span></li>
			            <li class="list-group-item">Brand: <span th:text="${appliance_parts.brand}"></span></li>
			            <li class="list-group-item">Color: <span th:text="${appliance_parts.color}"></span></li>
			            <li class="list-group-item">Made In: <span th:text="${appliance_parts.madeIn}"></span>
			            </li>
			            <li class="list-group-item">Material: <span th:text="${washer_parts.material}"></span>
			            </li>
			            <li class="list-group-item">Warranty: <span th:text="${washer_parts.warranty}"></span>
			            </li>
			            <li class="list-group-item">Condition: <span
			                th:text="${washer_parts.condition}"></span></li>
			          </ul>
			        </div>
		
			        <div th:if="${widget.category} == 'electronic'">
			          <div class="d-flex justify-content-center">
			            <h2>Product Information</h2>
			          </div>
			          <ul class="list-group" th:if="${widget.subCategory} == 'computer'">
			            <li class="list-group-item">Description: <span th:text="${widget.description}"></span>
			            </li>
			            <li class="list-group-item">For Office Use?: <span
			                th:text="${electronic.officeUse}"></span></li>
			            <li class="list-group-item">For Entertainment Use?: <span
			                th:text="${electronic.entertainmentUse}"></span></li>
			            <li class="list-group-item">Memory: <span th:text="${computer.memory}"></span> GB</li>
			            <li class="list-group-item">Storage: <span th:text="${computer.storage}"></span></li>
			            <li class="list-group-item">Processor: <span th:text="${computer.processor}"></span>
			            </li>
			            <li class="list-group-item">GPU: <span th:text="${computer.gpu}"></span></li>
			          </ul>
			          <ul class="list-group" th:if="${widget.subCategory} == 'videoGame'">
			            <li class="list-group-item">Description: <span th:text="${widget.description}"></span>
			            </li>
			            <li class="list-group-item">For Office Use?: <span
			                th:text="${electronic.officeUse}"></span></li>
			            <li class="list-group-item">For Entertainment Use?: <span
			                th:text="${electronic.entertainmentUse}"></span></li>
			            <li class="list-group-item">Developer: <span th:text="${videoGame.developer}"></span>
			            </li>
			            <li class="list-group-item">Title: <span th:text="${videoGame.title}"></span></li>
			            <li class="list-group-item">Console: <span th:text="${videoGame.console}"></span></li>
			            <li class="list-group-item">Condition: <span
			                th:text="${videoGame.itemCondition}"></span></li>
			          </ul>
			        </div>
		
			        <div th:if="${widget.category} == 'electronic_parts'">
			          <div class="d-flex justify-content-center">
			            <h2>Product Information</h2>
			          </div>
			          <ul class="list-group" th:if="${widget.subCategory} == 'computer_parts'">
			            <li class="list-group-item">Description: <span th:text="${widget.description}"></span>
			            </li>
			            <li class="list-group-item">Part Name: <span
			                th:text="${electronic_parts.partName}"></span></li>
			            <li class="list-group-item">Model: <span th:text="${electronic_parts.model}"></span></li>
			            <li class="list-group-item">Brand: <span th:text="${electronic_parts.brand}"></span></li>
			            <li class="list-group-item">Color: <span th:text="${electronic_parts.color}"></span></li>
			            <li class="list-group-item">Made In: <span th:text="${electronic_parts.madeIn}"></span>
			            </li>
			            <li class="list-group-item">Material: <span th:text="${computer_parts.material}"></span>
			            </li>
			            <li class="list-group-item">Warranty: <span th:text="${computer_parts.warranty}"></span>
			            </li>
			            <li class="list-group-item">Condition: <span
			                th:text="${computer_parts.condition}"></span></li>
			          </ul>
			          <ul class="list-group" th:if="${widget.subCategory} == 'videoGame_parts'">
			            <li class="list-group-item">Description: <span th:text="${widget.description}"></span>
			            </li>
			            <li class="list-group-item">Part Name: <span
			                th:text="${electronic_parts.partName}"></span></li>
			            <li class="list-group-item">Model: <span th:text="${electronic_parts.model}"></span></li>
			            <li class="list-group-item">Brand: <span th:text="${electronic_parts.brand}"></span></li>
			            <li class="list-group-item">Color: <span th:text="${electronic_parts.color}"></span></li>
			            <li class="list-group-item">Made In: <span th:text="${electronic_parts.madeIn}"></span>
			            </li>
			            <li class="list-group-item">Material: <span th:text="${videoGame_parts.material}"></span>
			            </li>
			            <li class="list-group-item">Warranty: <span th:text="${videoGame_parts.warranty}"></span>
			            </li>
			            <li class="list-group-item">Condition: <span
			                th:text="${videoGame_parts.condition}"></span></li>
			          </ul>
			        </div>
		
			        <div th:if="${widget.category} == 'lawnCare'">
			          <div class="d-flex justify-content-center">
			            <h2>Product Information</h2>
			          </div>
			          <ul class="list-group" th:if="${widget.subCategory} == 'lawnMower'">
			            <li class="list-group-item">Description: <span th:text="${widget.description}"></span>
			            </li>
			            <li class="list-group-item">Yard Size: <span th:text="${lawnCare.yardSize}"></span></li>
			            <li class="list-group-item">Tool Type: <span th:text="${lawnCare.toolType}"></span></li>
			            <li class="list-group-item">Brand: <span th:text="${mower.brand}"></span></li>
			            <li class="list-group-item">Power Source: <span th:text="${mower.powerSource}"></span>
			            </li>
			            <li class="list-group-item">Blade Width: <span th:text="${mower.bladeWidth}"></span>
			            </li>
			          </ul>
			        </div>
		
			        <div th:if="${widget.category} == 'lawnCare_parts'">
			          <div class="d-flex justify-content-center">
			            <h2>Product Information</h2>
			          </div>
			          <ul class="list-group" th:if="${widget.subCategory} == 'mower_parts'">
			            <li class="list-group-item">Description: <span th:text="${widget.description}"></span>
			            </li>
			            <li class="list-group-item">Part Name: <span
			                th:text="${lawnCare_parts.partName}"></span></li>
			            <li class="list-group-item">Model: <span th:text="${lawnCare_parts.model}"></span></li>
			            <li class="list-group-item">Brand: <span th:text="${lawnCare_parts.brand}"></span></li>
			            <li class="list-group-item">Color: <span th:text="${lawnCare_parts.color}"></span></li>
			            <li class="list-group-item">Made In: <span th:text="${lawnCare_parts.madeIn}"></span>
			            </li>
			            <li class="list-group-item">Material: <span th:text="${mower_parts.material}"></span>
			            </li>
			            <li class="list-group-item">Warranty: <span th:text="${mower_parts.warranty}"></span>
			            </li>
			            <li class="list-group-item">Condition: <span
			                th:text="${mower_parts.condition}"></span></li>
			          </ul>
			        </div>
		
			        <div th:if="${widget.category} == 'vehicle'">
			          <div class="d-flex justify-content-center">
			            <h2>Product Information</h2>
			          </div>
			          <ul class="list-group" th:if="${widget.subCategory} == 'car'">
			            <li class="list-group-item">Description: <span th:text="${widget.description}"></span>
			            </li>
			            <li class="list-group-item">Terrain: <span th:text="${vehicle.terrain}"></span></li>
			            <li class="list-group-item">Is it Road Safe?: <span
			                th:text="${vehicle.roadSafe}"></span></li>
			            <li class="list-group-item">Vehicle Condition: <span
			                th:text="${vehicle.condition}"></span></li>
			            <li class="list-group-item">Wheel Drive: <span th:text="${car.wheelDrive}"></span></li>
			            <li class="list-group-item">Transmission Type: <span
			                th:text="${car.transmissionType}"></span></li>
			            <li class="list-group-item">Model: <span th:text="${car.model}"></span></li>
			            <li class="list-group-item">Make: <span th:text="${car.make}"></span></li>
			            <li class="list-group-item">Year: <span th:text="${car.year}"></span></li>
			          </ul>
			        </div>
		        
				      <div th:if="${widget.category} == 'vehicle_parts'">
				        <div class="d-flex justify-content-center">
				          <h2>Product Information</h2>
				        </div>
				        <ul class="list-group" th:if="${widget.subCategory} == 'car_parts'">
				          <li class="list-group-item">Description: <span th:text="${widget.description}"></span>
				          </li>
				          <li class="list-group-item">Part Name: <span
				              th:text="${vehicle_parts.partName}"></span></li>
				          <li class="list-group-item">Model: <span th:text="${vehicle_parts.model}"></span></li>
				          <li class="list-group-item">Brand: <span th:text="${vehicle_parts.brand}"></span></li>
				          <li class="list-group-item">Color: <span th:text="${vehicle_parts.color}"></span></li>
				          <li class="list-group-item">Made In: <span th:text="${vehicle_parts.madeIn}"></span>
				          </li>
				          <li class="list-group-item">Material: <span th:text="${car_parts.material}"></span>
				          </li>
				          <li class="list-group-item">Warranty: <span th:text="${car_parts.warranty}"></span>
				          </li>
				          <li class="list-group-item">Condition: <span
				              th:text="${car_parts.condition}"></span></li>
				        </ul>
		      		</div>
		      	</div>
		      </div>		
		
		      <th:block th:switch="${page}">
		        <div th:case="openMessage" class="d-flex justify-content-center">
		          <form th:action="@{/marketSendMail}"
		                class="w-75" method="post">
		            <div class="d-flex justify-content-center my-2">
		              <h2>Send a Message</h2>
		            </div>
		            <div class="mb-3">
		              <label class="form-label">Subject : </label>
		              <input class="form-input" type="text" name="subject"/>
		            </div>
		            <div class="mb-3">
		              <label class="form-label">Message: </label>
		              <textarea class="form-control" id="message" name="message" rows="4" cols="50"
		                        style="resize: none;"></textarea>
		            </div>
		            <div class="mb-3 d-flex justify-content-center">
		              <a class="btn btn-outline-primary"
		                 th:href="@{/viewMarketListing/closeMessage}">Cancel</a>
		              <button type="submit" class="btn btn-outline-primary">Send Message</button>
		            </div>
		          </form>
		        </div>
		      </th:block>
		
		      <form th:if="${isBuyer && page != 'openMessage'}" id="buy-product"
		            class="row g-3 d-flex justify-content-center my-2" action="#"
		            th:action="@{/viewMarketListing/attemptPurchase}" th:object=${newTransaction}
		            method="post">
		        <div class="col-auto">
		          <label for="qtyBought" class="col-form-label">Number to Buy</label>
		        </div>
		        <div class="col-auto">
		          <input id="qtyBought" class="form-control" name="qtyBought" type="number"
		                 th:field="*{qtyBought}" placeholder="Number to Buy" min="1"
		                 th:max="${currListing.qtyAvailable}" value="0" required></input>
		        </div>
		        <div class="col-auto">
		          <input class="btn btn-success" id="buyProduct"
		                 name="buyProduct" type="submit" value="Purchase Items"></input>
		        </div>
		        <div class="col-sm-1">
		          <a class="btn btn-danger" href="/BrowseWidgetsButton">Back</a>
		        </div>
		      </form>
		      <form th:if="${!isBuyer}" id="update-listing"
		            class="row g-3 d-flex justify-content-center my-2" action="#"
		            th:action="@{/viewMarketListing/editListing}" th:object=${currListing} method="post">
		
		        <input type="hidden" th:field="*{id}">
		        <!--  default price must be set to current listing price -->
		        <div class="row d-flex justify-content-center">
		          <a class="btn btn-danger col-sm-1" data-bs-toggle="modal" data-bs-target="#deletePopup"> Delete Listing </a>
		          <div class="col-sm-1">
		            <label for="pricePerItem" class="col-form-label">New Price</label>
		          </div>
		          <div class="col-sm-2">
		            <input id="pricePerItem" class="form-control" name="pricePerItem" th:field="*{pricePerItem}" type="number" placeholder="New Price" min="0.0" value="0.0" step="0.01" required></input>
		          </div>
		          <div class="col-sm-1">
		            <label for="qtyAvailable" class="col-form-label">New Quantity</label>
		          </div>
		          <div class="col-sm-2">
		            <input id="qtyAvailable" class="form-control" name="qtyAvailable" th:field="*{qtyAvailable}" type="number" placeholder="New Quantity" min="0" value="0" required></input>
		          </div>
		          <!--  default quantity must be set to current listing quantity -->
		          <div class="col-sm-2">
		            <input class="btn btn-primary" id="updateListing" name="updateListing" type="submit" value="Update">
		          </div>
			        <div class="col-sm-2">
			          <a class="btn btn-danger" href="/BrowseWidgetsButton"> Back </a>
			        </div>
			    </div>
		      </form>
		    </div>
		  </div>
		</div>
	</body>
</html>